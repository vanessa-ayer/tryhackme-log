<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>{{ page.title }} - {{ site.title }}</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link
			rel="stylesheet"
			href="{{ '/assets/css/custom.css' | relative_url }}"
		/>
	</head>
	<body>
		<div class="site">
			<header class="site-header">
				<h1 class="site-title">
					<a href="{{ site.baseurl | prepend: site.url }}">{{ site.title }}</a>
				</h1>
				<p class="site-desc">{{ site.description }}</p>
				{% include xpbar.html %}
			</header>

			<main class="site-content">
				{% if page.layout == "post" %}
				<p class="post-meta">
					$ logged by <span class="author">Vanessa Ayer</span>
				</p>
				{% endif %} {{ content }}
			</main>

			<footer class="site-footer">
				<p>
					Theme by Vanessa â€¢ <small>Design Prototype for TryHackMe blog</small>
				</p>
			</footer>
		</div>
		<script>
			(function () {
				// --- config ---
				var speedPerChar = 28; // ms per char
				var triggerEarly = '0px 0px -20% 0px'; // start when 80% into viewport

				function typeText(target, text, speed, done) {
					var i = 0;
					(function tick() {
						target.textContent = text.slice(0, i++);
						if (i <= text.length) setTimeout(tick, speed);
						else if (done) done();
					})();
				}

				// HEADERS (title + section headers you marked up)
				var headers = [].slice.call(document.querySelectorAll('.type-header'));

				function observeHeaders() {
					if (!('IntersectionObserver' in window)) {
						headers.forEach(function (h) {
							var tgt = h.querySelector('.type-target');
							if (tgt)
								typeText(tgt, h.getAttribute('data-text') || '', speedPerChar);
						});
						return;
					}

					var seen = new WeakSet();
					var ioHeaders = new IntersectionObserver(
						function (entries) {
							entries.forEach(function (entry) {
								if (entry.isIntersecting && !seen.has(entry.target)) {
									seen.add(entry.target);
									var el = entry.target;
									var tgt = el.querySelector('.type-target');
									if (tgt)
										typeText(
											tgt,
											el.getAttribute('data-text') || '',
											speedPerChar
										);
									ioHeaders.unobserve(el);
								}
							});
						},
						{ root: null, rootMargin: triggerEarly, threshold: 0 }
					);

					headers.forEach(function (h) {
						ioHeaders.observe(h);
					});
				}

				// Kick off
				observeHeaders();
			})();
		</script>
	</body>
</html>
