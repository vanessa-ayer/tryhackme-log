<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>{{ page.title }} - {{ site.title }}</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link
			rel="stylesheet"
			href="{{ '/assets/css/custom.css' | relative_url }}"
		/>
	</head>
	<body>
		<div class="site">
			<header class="site-header">
				<h1 class="site-title">
					<a href="{{ site.baseurl | prepend: site.url }}">{{ site.title }}</a>
				</h1>
				<p class="site-desc">{{ site.description }}</p>
				<div class="xpbar">
					<div class="xp-meta">ðŸ’€ Level 1 â€” 50 XP / 500 XP</div>
					<div class="xp-track">
						<div class="xp-fill" style="width: 10%"></div>
					</div>
				</div>
			</header>

			<main class="site-content">
				<h1 class="type-header title" data-text="{{ page.title }}">
					<span class="type-target"></span><span class="cursor"></span>
				</h1>

				<p class="post-meta">
					$ logged by <span class="author">Vanessa Ayer</span>
				</p>

				{{ content }}
				<hr class="divider" />

				<p class="return-link">
					<a
						href="{{ site.baseurl }}/"
						aria-label="Exit room and return to home"
					>
						<span class="type-target" data-text="&lt; exit room"></span>
						<span class="cursor"></span>
					</a>
				</p>
			</main>

			<footer class="site-footer">
				<p>Made by Vanessa â€¢ <small>TryHackMe Journey</small></p>
			</footer>
		</div>
		<script>
			(function () {
				// typing config
				var initialDelay = 300; // delay before first header starts
				var betweenDelay = 220; // pause between finishing one header and starting next
				var speedPerChar = 28; // typing speed (ms per character)
				var exitDelay = 600; // pause before typing < exit room> after last header

				// grab ALL typed headers (title first, then h2s) in DOM order
				var headers = Array.prototype.slice.call(
					document.querySelectorAll('.type-header')
				);

				// also grab the footer return link (exit room)
				var exitLink = document.querySelector('.return-link .type-target');

				function typeOne(el, done) {
					var target = el.querySelector('.type-target');
					var text = el.getAttribute('data-text') || '';
					var i = 0;

					if (!target) return done && done();

					(function tick() {
						target.textContent = text.slice(0, i++);
						if (i <= text.length) {
							setTimeout(tick, speedPerChar);
						} else {
							setTimeout(done, betweenDelay);
						}
					})();
				}

				function typeSequence(items, idx) {
					if (idx >= items.length) {
						// all headers done â†’ trigger < exit room >
						if (exitLink) {
							setTimeout(function () {
								var full = exitLink.getAttribute('data-text') || '';
								var i = 0;
								(function tickExit() {
									exitLink.textContent = full.slice(0, i++);
									if (i <= full.length) setTimeout(tickExit, speedPerChar);
								})();
							}, exitDelay);
						}
						return;
					}
					typeOne(items[idx], function () {
						typeSequence(items, idx + 1);
					});
				}

				if (headers.length) {
					setTimeout(function () {
						typeSequence(headers, 0);
					}, initialDelay);
				}
			})();
		</script>
	</body>
</html>
